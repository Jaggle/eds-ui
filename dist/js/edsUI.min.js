!function(e){window.edsUI=window.edsUI||{},edsUI.toast=function(t,s){var a=(new Date).getTime();e("body").append(edsUI.template.toast);var n=e(".jakes-notice");n.html(t),n.attr("data-id",a),n.animate({top:100},500,function(){setTimeout(function(){n.fadeOut(500),edsUI.close(a)},500)}),s&&setTimeout(function(){s()},1e3)},edsUI.alert=function(t,s,a,n,i){var o=(new Date).getTime();switch(arguments.length){case 1:s=t,t="提示";break;case 2:callback1=s,s=t,t="提示"}e("body").append(this.template.alert);var r=e(".jakes-alert");r.attr("data-id",o);var c=e(".jakes-alert-header"),d=e(".jakes-alert-content");if(d.html(s),c.html(t),c.prepend('<i class="fa fa-exclamation-circle">&nbsp;&nbsp;'),this._bingCloseIcon(c,o),r.css("top",-250),e(window).width()<1e3)var l=e(window).height()/2-r.height();else l=100;r.animate({top:l},500),r.css("margin-left",-r.width()/2),r.show(),e("*").blur(),e(document).keydown(function(t){13==t.keyCode&&e("div.jakes-alert-button > button").trigger("click")}),e("div.jakes-alert-button > button").click(function(){callback1&&callback1(),edsUI.close(o)})},edsUI.confirm=function(t,s,a,n,i){var o=(new Date).getTime();switch(arguments.length){case 2:n=s,s=t,t="提示",a=["确定","取消"];break;case 3:n=a,a=["确定","取消"];break;case 4:i=n,n=a,a=["确定","取消"]}e("body").append(this.template.confirm);var r=e(".jakes-confirm");r.attr("data-id",o);var c=e(".jB-confirm-header");c.html(t),c.prepend('<i class="fa fa-exclamation-circle">&nbsp;&nbsp;'),this._bingCloseIcon(c,i||function(){},o),e(".jB-confirm-content").html(s);var d=e("div.jakes-confirm-buttons > button:nth-child(1)"),l=e("div.jakes-confirm-buttons > button:nth-child(2)");if(d.html(a[0]),l.html(a[1]),r.css("top",-250),r.show(),e(window).width()<1e3)var h=e(window).height()/2-r.height();else h=100;r.animate({top:h},500),r.css("margin-left",-r.width()/2),d.click(function(){return n&&n(),edsUI.close(o),!0}),l.click(function(){return i&&i(),edsUI.close(o),!1})},edsUI.prompt=function(t,s,a,n){var i=(new Date).getTime();switch(arguments.length){case 2:a=s,s=["确定","取消"];break;case 3:n=a,a=s,s=["确定","取消"]}e("body").append(this.template.prompt);var o=e(".jakes-confirm");o.attr("data-id",i);var r=e(".jB-confirm-header");r.html(t),r.prepend('<i class="fa fa-exclamation-circle">&nbsp;&nbsp;'),this._bingCloseIcon(r,n||function(){},i);var c=e("div.jakes-confirm-buttons > button:nth-child(1)"),d=e("div.jakes-confirm-buttons > button:nth-child(2)");c.html(s[0]),d.html(s[1]),o.css("top",-250),o.show(),o.animate({top:100},500),c.click(function(t){a&&(t.content=e(".jB-confirm-content input").val(),a(t)),edsUI.close(i)}),d.click(function(){n&&n(),edsUI.close(i)})},edsUI.form=function(t,s,a){e(document).on("submit",t,function(){return e.ajax({url:e(t).attr("action"),type:e(t).attr("method"),data:e(t).serialize(),beforeSend:function(){if(a)switch(window.eds={},a[1]){case"text":e(a[0]).val()?window.eds.loaddingHtml=e(a[0]).val():window.eds.loaddingHtml=e(a[0]).html(),e(a[0]).val()?e(a[0]).val("正在提交..."):e(a[0]).html("正在提交..."),e(a[0]).addClass("disabled")}},complete:function(){if(a)switch(a[1]){case"text":e(a[0]).removeClass("disabled"),e(a[0]).val()?e(a[0]).val(window.eds.loaddingHtml):e(a[0]).html(window.eds.loaddingHtml)}},success:function(e){s&&s(e)}}).error(function(t){var s=JSON.parse(t.responseText);"undefined"!=typeof s.message?edsUI.mask().alert(s.message):console.log(t.responseText),e(a[0]).removeClass("disabled"),e(a[0]).val()?e(a[0]).val(window.eds.loaddingHtml):e(a[0]).html(window.eds.loaddingHtml)}),!1})},edsUI.html=function(t,s,a){var n=(new Date).getTime();e("body").append(this.template.html);var i=e(".jakes-html");i.attr("data-id",n);var o=e(".jakes-html-header"),r=e(".jakes-html-content");if(o.html(t),r.html(s),o.prepend('<i class="fa fa-exclamation-circle">&nbsp;&nbsp;'),this._bingCloseIcon(o,a,n),i.css("top",-250),e(window).width()<1e3)var c=e(window).height()/2-i.height();else c=100;i.animate({top:c},500),i.css("margin-left",-i.width()/2),i.show()},edsUI.mask=function(){var t="<div class='jakes-mask'></div>";e("body").append(t);var s=e(".jakes-mask");return s.height(e(document).height()),s.show(),this},edsUI.location={href:"",go:function(){window.location.href=this.href},getHostName:function(e){if(e||(e=window.location.href),e.indexOf("?")!=-1)var t=e.substr(0,e.indexOf("?"));else t=e.indexOf("#")!=-1?e.substr(0,e.indexOf("#")):e;return this.href=t.replace(/\/$/,""),this},setParameter:function(e,t){return this.hasParameter(e)&&this.removeParameter(e),this.href.indexOf("?")!=-1?this.href+="&"+e+"="+t:this.href+="?"+e+"="+t,this},removeParameter:function(e){var t=new RegExp("\\?"+e+"=[^\\&]*"),s=new RegExp("\\&"+e+"=[^\\&]*");if(this.href.search(t)>=0){this.href=this.href.replace(t,"");var a=this.href.indexOf("&");if(a>=0){var n=this.href.substr(0,a),i=this.href.substr(a+1);this.href=n+"?"+i}}return this.href=this.href.replace(s,""),this},getParameter:function(e){var t=this.getParameters();return t.hasOwnProperty(e)?t[e]:(console.info("location has no parameter named "+e),"")},hasParameter:function(e){return this.getParameters().hasOwnProperty(e)},holdParameters:function(){var e=this.getParameters();for(var t in e){if(!t)return this;e.hasOwnProperty(t)&&"page"!=t&&this.setParameter(t,e[t],!0)}return this},getParameters:function(e){e||(e=window.location.href);var t=e.indexOf("?");if(t!==-1){var s=e.substr(t+1),a=s.indexOf("#");a!=-1&&(s=s.substr(0,a));for(var n=s.split("&"),i=[],o=0;o<n.length;o++){var r=n[o].split("=");i[r[0]]=r[1]}}else i=[];return i}},edsUI.parse=function(t,s){for(var a in s)if(s.hasOwnProperty(a)){var n=new RegExp("@"+a+"@","g");t=t.replace(n,s[a])}return e(t)},edsUI.close=function(t){var s=e(".jakes-mask"),a=e(".jakes[data-id='"+t+"']");t&&a.length>0?a.remove():e(".jakes").remove(),s.length>0&&s.remove()},edsUI._bingCloseIcon=function(t,s,a){switch(t.append(this.template.closeIcon),arguments.length){case 2:a=s,s=null}e(".jakes-close-icon").click(function(){edsUI.close(a),s&&s()})},edsUI.template={toast:"<div class='jakes jakes-notice'></div>",confirm:'<div class="jakes jakes-confirm"><div class="jB-confirm-header"></div><div class="jB-confirm-content"></div><div class="jakes-confirm-buttons"> <button>按钮1</button><button>按钮2</button></div></div>',prompt:'<div class="jakes jakes-confirm"><div class="jB-confirm-header"></div><div class="jB-confirm-content"><input type="text" class="form-control"></div><div class="jakes-confirm-buttons"> <button>按钮1</button><button>按钮2</button></div></div>',closeIcon:'<i class="jakes-close-icon"></i>',alert:'<div class="jakes jakes-alert"> <div class="jakes-alert-header">警告</div> <div class="jakes-alert-content">不能删除该内容</div>  <div class="jakes-alert-button"><button id="eds-alert-btn">确定</button></div> </div>',html:'<div class="jakes jakes-html"><div class="jakes-header jakes-html-header">自定义html</div><div class="jakes-content jakes-html-content"></div></div>'},e(function(){e("a[data-edsPost]").click(function(t){function s(t,s){e.post(t.attr("href"),{},function(e){e.status?(s.indexOf("toast")!=-1?edsUI.toast(e.message):edsUI.mask().alert(e.message,function(){window.location.reload()}),t.html(i)):(edsUI.mask().alert(e.message),t.html(i))}).error(function(e){var s=JSON.parse(e.responseText);"undefined"!=typeof s.message?edsUI.mask().alert(s.message):console.log(e.responseText),t.html(i)})}t.preventDefault();var a=e(this),n=a.attr("data-edsPost");"undefined"==typeof window.eds&&(window.eds={}),window.eds.me=a;var i=a.html();a.html("正在提交..."),e(this).hasClass("btn-danger")||e(this).hasClass("confirm")?edsUI.mask().confirm("警告","您真的要执行此操作吗，操作将不可撤销",function(){s(window.eds.me,n)},function(){a.html(i)}):s(a,n)}),e(document).on("click",".edsUI-close",function(t){edsUI.close(e(t.toElement).closest("jakes").attr("data-id"))})})}(jQuery);